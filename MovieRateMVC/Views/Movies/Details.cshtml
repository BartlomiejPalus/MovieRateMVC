@using MovieRateMVC.Models.Movies
@model MovieDetailsModel

@{
	ViewData["Title"] = Model.Title;
}

<div class="d-flex justify-content-center mt-5">
	<div class="d-flex w-75 align-items-start">
		<div class="w-75 p-3 me-3">
			<h1>@Model.Title</h1>
			<p>@Model.Description</p>

			<p>Genre@(Model.Genres.Count == 1 ? "" : "s"):
				@string.Join(", ", Model.Genres)
			</p>

			@if (Model.ReleaseDate != null)
			{
				<p>Release date: @Model.ReleaseDate</p>
			}

			@if (Model.Director != null)
			{
				<p>Director: @Model.Director</p>
			}
		</div>

		<div class="w-25 card p-3">
			@if (Model.AverageRating != 0)
			{
				<h5>Average rating: @Math.Round(Model.AverageRating, 2)</h5>
			}
			<p class="mt-3">Rate the movie:</p>
			<form asp-controller="Movies" asp-action="Rate" asp-route-id="@Model.Id" method="post">
				@for (int i=1; i<=5; i++)
				{
					<input type="radio" name="rate" value="@i" id="rate@(i)" class="form-check-input" 
						@(Model.UserRating == i ? "checked" : "")/>
					<label for='rate@(i)' class="form-check-label">@i</label>
				}
				<br />
				<input type="submit" value="Save" class="btn btn-primary mt-3" />
			</form>
		</div>
	</div>
</div>